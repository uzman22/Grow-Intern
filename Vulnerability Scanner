import socket
import sys
import requests
import re
from bs4 import BeautifulSoup

def scan_ports(target_host, start_port, end_port):
    print(f"Scanning ports on {target_host}...")
    for port in range(start_port, end_port + 1):
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(1)
            result = sock.connect_ex((target_host, port))
            if result == 0:
                print(f"Port {port}: Open")
            sock.close()
        except KeyboardInterrupt:
            sys.exit()
        except Exception as e:
            print(f"Error scanning port {port}: {e}")

def detect_outdated_versions(urls):
    print("Detecting outdated software versions...")
    for url in urls:
        try:
            response = requests.get(url)
            if response.status_code == 200:
                soup = BeautifulSoup(response.text, 'html.parser')
                version_tag = soup.find(text=re.compile(r'\b(version|v)\b\s*[\d.]+', re.IGNORECASE))
                if version_tag:
                    version = re.search(r'[\d.]+', version_tag).group()
                    print(f"Version found on {url}: {version}")
                else:
                    print(f"No version information found on {url}")
            else:
                print(f"Failed to fetch {url}: HTTP status code {response.status_code}")
        except Exception as e:
            print(f"Error detecting version on {url}: {e}")

def main():
    target_host = "daraz.pk"
    start_port = 1
    end_port = 1000
    urls = ["https://www.daraz.pk"]

    scan_ports(target_host, start_port, end_port)
    detect_outdated_versions(urls)

if __name__ == "__main__":
    main()
